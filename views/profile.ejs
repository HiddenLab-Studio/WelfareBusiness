<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="../public/css/main.css">
    <link rel="stylesheet" type="text/css" href="../public/css/profile.css">
    <link rel="stylesheet" type="text/css" href="../public/css/modal.css">
    <link rel="stylesheet" type="text/css" href="../public/css/header.css">
    <link rel="stylesheet" type="text/css" href="../public/css/footer.css">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel="stylesheet" type="text/css">

    <!-- LIBS CSS -->
    <link rel="stylesheet" type="text/css" href="../public/css/libs/hover/hover.css">

    <!-- LIBS JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/dixonandmoe/rellax@master/rellax.min.js"></script>

    <title>WB | Profile</title>
</head>
<body>

    <%- include("./partials/simplifiedHeader"); -%>

    <div id="editModal" class="edit__modal__container" style="display: none;">
        <div class="edit__container">
            <div class="close"><i id="closeEditModal" class='bx bx-x'></i></div>
            <div id="changeUsernameContainer" class="username" style="display: none">
                <div class="text">
                    <h1>Create a new username</h1>
                    <span>Your new username must be different from previous used username.</span>
                </div>
                <form action="/api/changeusername" method="POST" class="form">
                    <div class="element">
                        <span>Your new username</span>
                        <label for="newUsername">
                            <input name="newUsername" id="newUsername" type="text" placeholder="Enter your current password" required>
                        </label>
                    </div>
                    <div class="submit__btn">
                        <button type="submit" id="changeUsernameBtn" class="hvr-grow">Change username</button>
                    </div>
                </form>
            </div>
            <div id="changePasswordContainer" class="password" style="display: none">
                <div class="text">
                    <h1>Create new password</h1>
                    <span>Your new password must be different from previous used passwords.</span>
                </div>
                <form action="/api/changepassword" method="POST" class="form">
                    <div class="element">
                        <span>Your current password</span>
                        <label for="currentPassword">
                            <input name="currentPassword" id="currentPassword" type="text" placeholder="Enter your current password" required>
                        </label>
                    </div>
                    <div class="element">
                        <span>Your new password</span>
                        <label for="newPassword">
                            <input name="newPassword" id="newPassword" type="text" placeholder="Enter your current password" required>
                        </label>
                    </div>
                    <div class="element">
                        <span>Confirm your new password</span>
                        <label for="confirmNewPassword">
                            <input name="confirmNewPassword" id="confirmNewPassword" type="text" placeholder="Enter your current password" required>
                        </label>
                    </div>
                    <div class="submit__btn">
                        <button type="submit" id="changePasswordBtn" class="hvr-grow">Change password</button>
                    </div>
                </form>
            </div>
            <div id="changeAvatarContainer" class="avatar" style="display: none;">
                <div class="text">
                    <h1>Change your avatar</h1>
                </div>
                <div id="invalidAvatarContainer" class="error" style="display: none;">
                    <i class='bx bx-info-circle'></i>
                    <ul>
                        <li>Please select a valid avatar!</li>
                    </ul>
                </div>
                <div id="avatarSelectionContainer" class="select__avatar">
                    <img data="1" src="../public/assets/img/avatar/Avatar_1.png" alt="Avatar">
                    <img data="2" src="../public/assets/img/avatar/Avatar_2.png" alt="Avatar">
                    <img data="3" src="../public/assets/img/avatar/Avatar_3.png" alt="Avatar">
                    <img data="4" src="../public/assets/img/avatar/Avatar_4.png" alt="Avatar">
                </div>
                <div class="submit__btn">
                    <button type="submit" id="changeAvatarBtn" class="hvr-grow">Change avatar</button>
                </div>
            </div>
        </div>
    </div>

    <main>
        <div class="profile__container">
            <div class="title">
                <h1>Welcome back</h1>
                <span><%= username %></span>
            </div>
            <div class="informations__container">
                <h2>Informations</h2>
                <div class="profile__informations__table">
                    <table>
                        <tbody>
                        <tr>
                            <td>Username</td>
                            <td class="profile__editor"><span><%= username %></span><i id="changeUsernameBtn" class='bx bx-edit'></i></td>
                        </tr>
                        <tr>
                            <td>Password</td>
                            <td class="profile__editor"><span>**********</span><i id="changePasswordBtn" class='bx bx-edit'></i></td>
                        </tr>
                        <tr>
                            <td>Avatar</td>
                            <td class="profile__editor">
                                <div class="avatar__image__container">
                                    <img src="../public/assets/img/avatar/Avatar_<%= avatar %>.png" alt="">
                                </div>
                                <i id="changeAvatarBtn" class='bx bx-edit'></i>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="choose__avatar__container">
                <h2>WIP</h2>
            </div>
        </div>
    </main>

    <%- include("./partials/footer"); -%>

    <script src="./public/js/profile/XMLRequest.js"></script>
    <script src="./public/js/profile/avatarManager.js"></script>
    <script src="./public/js/profile/main.js"></script>
    <% if(!session){ %>
        <script src="./public/js/header/connectionModal.js"></script>
    <% } else { %>
        <script src="./public/js/header/accountModal.js"></script>
    <% } %>

</body>
</html>